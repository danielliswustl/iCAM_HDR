% Written by: Lawrence Taplin and Garrett M. Johnson%% This program is a simple example illustrating% how to use the iCAM hdr tone mapping% code-base. Use it however makes you happy.%% Modified: 03/23/04%	% We'll use the memorial HDR image from	% http://www.debevec.org	% You need to know the image size to use	% the read_hdr function. In this case	% it is 512x768	%img = load_hdr('memorial.dat', 512, 768) ;	% actually, now we will use the read_rle_rgbe() function,	% since it is much easier	img = read_rle_rgbe('hdr.hdr') ;	% we are going to assume that the images don't actually	% have physical radiance meaning, and are normalized	% to be between 0-1. This is a pretty good assumption	% if you use Photosphere, as that defaults to normalized	%units.	% just in case, normalize	img = img./max(img(:)) ;        green = squeeze(img(:,:,2)) ;        prc = prctile(green(:), 99) ;        scale = 50/prc ;	% Now call the render_hdr with the new scaling factor.	% It is as simple as that...	hdr_image = render_hdr(img*scale) ;	% Disply the image, for viewing glory	figure; 	imshow(hdr_image);	% Now save the image	imwrite(hdr_image, 'example.tif');	